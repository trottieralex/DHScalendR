---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```
# DHScalendR

<!-- badges: start -->
<!-- badges: end -->

The goal of DHScalendR is to make the use of the DHS calendar easier to use in R. **This package is currently being developped**, but it already contains functions to:

* Deal with CMC date format (back and forth)
* Split Calendar into months columns
* Recoding of the calendar

Next additions will include ways to:

* Performe common operations
* Measure of specified events (i.e. contraceptive failure or post-partum adoption)


## Installation

<!-- You can install the released version of DHScalendR from [CRAN](https://CRAN.R-project.org) with: -->

To install the current version of this package:

```{r, eval=FALSE}
devtools::install_github("trottieralex/DHScalendR")
```


## Data

This package contains a small exemple dataset extracted from a DHS model dataset.

```{r, eval=FALSE}
data <- dhs_extract
head(data)
?dhs_extract
```


## Transform CMC date format

The DHS widely use CMC format date (number of month counting from January 1900). A format often convenient for analysis, but hardly interpretable. These function make the transfer CMC from/to Date and years as decimal straigthforward. 

```{r example}
library(DHScalendR)

# The Date of the Teharan declaration:
cmc_to_Date(761)
cmc_from_Date(as.Date("1963-05-13")) #Show following warning the 1st time

# or for April 19, 1989
cmc_to_Year(1072)
cmc_from_Year(1989.296)

```


## Split and recode DHS calendar

This function divides the DHS calendar from a data frame into month columns that are added to the said data frame under the name: "CMCx" + [CMC date of the month] 
```{r}
dataset <- dhs_extract[95:100, c("V008", "V025", "VCAL.1")]

#Dividing months
dataset_plus_CMCx <- calendar_split(dataset, "V008", "VCAL.1")
(dataset_plus_CMCx <- dataset_plus_CMCx[ ,1:10])

#Recoding of calendar months
calendar_recode(dataset_plus_CMCx$CMCx1326)
calendar_recode(c("0","0","P","P","P","T","A","A","A","A","3","3","3"), 
                recoding = "modern_DHS6")

```

